/* --- CẤU HÌNH CHUNG --- */
/* Ẩn menu burger và footer mặc định của Streamlit */
#MainMenu {visibility: hidden;}
footer {visibility: hidden;}
header {visibility: hidden;}

/* Tạo nền gradient cho toàn ứng dụng (giống ảnh mẫu) */
.stApp {
    background: linear-gradient(to bottom right, #fddffc 0%, #dae9ff 50%, #c0f1ff 100%);
}

/* Căn giữa nội dung chính */
.main .block-container {
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    padding-top: 32px;
    padding-bottom: 150px; /* Tăng khoảng trống dưới cùng để không bị che bởi footer */
}

/* --- HEADER NỘI DUNG CĂN GIỮA --- */
.header-inner {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: 0 24px;
}
/* --- HEADER CỐ ĐỊNH --- */
.fixed-header {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 100vw;
    z-index: 1000;
    background: linear-gradient(to right, #f7b3ef 5%, #a5f9f9 100%);
    box-shadow: 0px 4px 8px rgba(0,0,0,0.05);
    padding: 18px 70px 12px 70px;
}

/* --- HEADER & WELCOME TEXT --- */
.custom-header {
    margin-bottom: 12px;
    color: #333;
    font-weight: 600;
}

.welcome-title {
    text-align: center;
    text-justify: center;
    color: #333 !important;
    font-size: 2.5rem;
    font-weight: 700;
}

.welcome-subtitle {
    text-align: center;
    font-size: 1.2rem;
    color: #555555 !important;
    margin-bottom: 24px;
}

/* --- FIXED FOOTER (CHAT INPUT & BUTTON) --- */

/* 1. Style container stBottom (chứa st.chat_input) */
[data-testid="stBottom"] {
    background: linear-gradient(to right, #facdf4 5%, #bff8f8 100%);
    box-shadow: 0px -2px 8px rgba(0,0,0,0.04);
    padding-bottom: 20px;
    padding-top: 20px;
    z-index: 999;
}

/* 2. Cố định nút bấm (nằm trong columns) xuống dưới cùng */
/* Sử dụng :has() để target block chứa anchor #fix-chat-button */
[data-testid="stHorizontalBlock"]:has(#fix-chat-button) {
    position: fixed;
    bottom: 0px; /* Đặt sát đáy để dễ căn chỉnh với stBottom */
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 800px;
    z-index: 1000;
    padding: 20px 1rem; /* Padding tương tự stBottom để khớp vị trí */
    pointer-events: none; /* Để click xuyên qua vùng trống */
    align-items: flex-end; /* Căn đáy các phần tử trong row */
}

/* Bật lại click cho nút bấm và input (nếu input nằm trong block này) */
[data-testid="stHorizontalBlock"]:has(#fix-chat-button) button,
[data-testid="stHorizontalBlock"]:has(#fix-chat-button) [data-testid="stChatInput"],
[data-testid="stHorizontalBlock"]:has(#fix-chat-button) textarea {
    pointer-events: auto;
}

/* 3. Tinh chỉnh st.chat_input để không bị nút che mất */
/* Nếu input nằm trong stBottom (trường hợp thường gặp) */
[data-testid="stBottom"] .stChatInput {
    background: transparent !important;
    padding-right: 60px !important; /* Chừa chỗ cho nút bên phải */
}

/* Nếu input nằm trong stHorizontalBlock (trường hợp nó không nhảy xuống stBottom) */
[data-testid="stHorizontalBlock"]:has(#fix-chat-button) .stChatInput {
    background: transparent !important;
    /* Không cần padding-right lớn nếu nó nằm cùng hàng với nút */
}

/* Ẩn background mặc định của input container nếu có */
[data-testid="stBottom"] > div {
    background: transparent;
    max-width: 800px;
    margin: 0 auto;
}

/* --- CHAT INPUT --- */
/* Tùy chỉnh lại thanh chat input phía dưới cho bo tròn hơn */
.stChatInputContainer {
    border-radius: 25px !important;
    border: 1px solid #ddd;
    background-color: #fff;
    padding: 5px;
    box-shadow: 0px -2px 10px rgba(0,0,0,0.05);
}

.stChatInputContainer textarea {
    border: none !important; /* Xóa viền của textarea bên trong */
}